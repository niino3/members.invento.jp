# 顧客管理システム要件定義書

## 1. 全体概要

### プロジェクト目的・背景
- 自社用顧客管理システムの構築
- 基本的な管理に加えて、サービスを登録できる
- サービス毎に機能を柔軟に追加できる

### 対象ユーザー
- 管理者
- ユーザー（顧客）

### 想定利用シナリオ・ユースケース

#### 管理者
- 顧客の登録、管理
- サービスの管理

#### ユーザー
- ログイン、パスワードリマインダー
- ユーザーダッシュボード
- 契約内容の確認
- 請求履歴の確認

### システム構成
- 基盤としてFirebaseを採用し、認証・データベース・サーバレス機能を活用する
- ドメインは members.invento.jp とする
- UIはTailwind CSSのフレームワークを使用する
- 開発言語はTypeScriptでNext.jsを採用
- ホスティングはFirebase Hostingを使用

## 2. 顧客管理（管理者向け）

### 機能一覧
- 顧客一覧表示
- 顧客検索機能
- 顧客登録機能（新規、編集、削除）

### 顧客情報項目
- 法人個人種別
- 社名（必須）
- 名前（必須）
- 郵便番号
- 住所-1
- 住所-2
- 転送先郵便番号
- 転送先住所-1
- 転送先住所-2
- 電話番号
- メールアドレス
- 契約開始日
- 契約終了日
- 支払い方法（振込、PayPal）
- 専用電話番号
- 専用電話転送先番号
- 請求書送付有無
- 請求書送付方法（メール、郵送）
- 利用サービス（複数可）

## 3. サービス管理

### サービスカテゴリー機能
- サービスの上位概念としてサービスカテゴリーを定義
- サービスカテゴリーの下に複数のサービスがぶら下がる階層構造
- 顧客は各サービスを複数契約可能

### サービスカテゴリー管理機能
- サービスカテゴリー一覧表示
- サービスカテゴリー検索機能
- サービスカテゴリーの追加、編集、削除

### サービス管理機能
- サービスの追加（カテゴリー選択必須）
- サービスの変更
- サービスの削除
- サービス一覧表示（カテゴリー別表示）
- サービス検索機能

### サービスカテゴリー情報項目
- カテゴリー名（必須）
- カテゴリー説明
- 表示順序
- 有効/無効フラグ

### サービス情報項目（既存に追加）
- 所属カテゴリーID（必須）

## 4. お客様ポータル（ユーザー向けダッシュボード）

### 機能一覧
- ログイン・認証機能（Firebase Auth想定）
- 契約内容確認画面
- 請求・支払い履歴閲覧
- 契約プラン変更申請機能
- 問い合わせフォーム

## 5. 非機能要件

### セキュリティ
- Firebase Authenticationによる認証
- Firestore Security Rulesによるアクセス制御
- HTTPS通信の強制

### パフォーマンス
- ページ読み込み時間: 3秒以内
- 検索レスポンス: 1秒以内

### 可用性
- Firebase Hostingの高可用性を活用
- 99.9%以上の稼働率を目標

### 拡張性
- サービス毎の機能追加を考慮したモジュール設計
- マイクロサービス的なアーキテクチャの採用

## 6. 開発・運用要件

### 開発環境
- Node.js 18以上
- TypeScript 5.0以上
- Next.js 14以上

### 運用環境
- Firebase Hosting
- Firebase Functions（SSR対応）
- Firebase Firestore
- Firebase Authentication

### バックアップ
- Firestoreの自動バックアップ機能を活用
- 日次バックアップの実施

## 更新履歴
- 2025年8月15日: 初版作成